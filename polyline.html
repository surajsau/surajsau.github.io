<html>
  <head>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" href="./css/polyline.css" type="text/css" />
  </head>
  <body>
    <table>
      <tr>
        <td>Encoded String</td>
        <td><input type="text" id="input_encoded"/></td>
      </tr>
      <tr>
        <td>Decoded String</td>
        <td id="decoded_result"></td>
      </tr>
    </table>
    <button onclick="decode()" class="pure-material-button-contained">Decode</button>
      <script>
        function decode(){
          // array that holds the points
          encoded = document.getElementById('input_encoded').value;
          console.log(encoded);
          var points=[]
          var index = 0, len = encoded.length;
          var lat = 0, lng = 0;
          while (index < len) {
              var b, shift = 0, result = 0;
              do {
                b = encoded.charAt(index++).charCodeAt(0) - 63;//finds ascii                                                                                    //and substract it by 63
                result |= (b & 0x1f) << shift;
                shift += 5;
               } while (b >= 0x20);

              var dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
              lat += dlat;
              shift = 0;
              result = 0;
              do {
                b = encoded.charAt(index++).charCodeAt(0) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
              } while (b >= 0x20);
              var dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
              lng += dlng;

           points.push({lat:lat,lng:lng})
          }

          var decoded_string = "";
          for (i=0; i<points.length; i++) {
            decoded_string += "(" + points[i]['lat'] + ":" + points[i]['lng'] + ")";
            if(i != points.length - 1)
              decoded_string += ", ";
          }
          document.getElementById('decoded_result').innerHTML = decoded_string;
          return points
        }
      </script>
  </body>
</html>
